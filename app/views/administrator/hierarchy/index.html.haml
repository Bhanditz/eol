All Hierarchies

%br/
= will_paginate @hierarchies

%table.results_table{:width => "100%", :cellspacing => "0"}
  %tr
    %th
      = link_to 'Agent', {:order_by=>'agent'}
    %th
      = link_to 'Hierarchy', {:order_by=>'label'}
    %th
      = link_to 'Browsable', {:order_by=>'browsable'}
    %th
      Edit
  - for hierarchy in @hierarchies
    - column_class=cycle('odd','even')
    %tr{:valign => "top"}
      %td{:width => "40%", :class => column_class}
        = hierarchy['agent_name']
        - if hierarchy['content_partner_agent_id']
          %small
            = "("+ link_to('partner page', { :controller => 'administrator/content_partner_report', :action => 'show', :id => hierarchy['content_partner_agent_id'] }) +")"
      %td{:class => column_class}
        - if hierarchy['agent_name'] == 'uBio'
          This is a flat list of 10 million strings - not going to let you browse it
        -else
          = link_to(hierarchy.form_label, { :action => 'browse', :id => hierarchy.id })
          %br
          = hierarchy.description
      %td{:class => column_class}
        - browsable = 'no'
        - browsable = 'yes' if hierarchy.browsable==1
        - browsable = '<strong>pending</strong>' if hierarchy.request_publish==true
        = browsable
      %td{:class => column_class}
        = link_to("edit", {:action => 'edit', :id => hierarchy.id })
%br
%br
= will_paginate @hierarchies