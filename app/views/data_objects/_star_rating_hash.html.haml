- rate_percentage = data_object.data_rating * 20.0
- if show_controls
  Overall:
  %span.inline-rating
    %ul.star-rating.small-star.average-rating
      %li.current-rating{ :id => "average-rating-#{data_object.id}", :style => "width:#{rate_percentage}%;" }
        Overall:
        = data_object.data_rating.to_s
  Your Rating:
  %span.inline-rating
    %ul.star-rating.small-star.user-rating
      - user_rating = data_object.rating_from_user(current_user)
      - is_image = data_object.is_image?
      %li.current-rating{ :id => "user-rating-#{data_object.id}", :style => "width:#{(user_rating) ? user_rating.rating * 20.0 : 0}%;" }
        Your Rating:
        = (user_rating) ? user_rating.rating : 0
      %li
        = link_to('1', {:controller => 'data_objects', :action => 'rate', :id => data_object.id, :stars => 1}, :class => 'one-star', 'data-data_object_id' => data_object.id, 'data-data_type' => (is_image ? 'image' : 'other'))
      %li
        = link_to('2', {:controller => 'data_objects', :action => 'rate', :id => data_object.id, :stars => 2}, :class => 'two-stars', 'data-data_object_id' => data_object.id, 'data-data_type' => (is_image ? 'image' : 'other'))
      %li
        = link_to('3', {:controller => 'data_objects', :action => 'rate', :id => data_object.id, :stars => 3}, :class => 'three-stars', 'data-data_object_id' => data_object.id, 'data-data_type' => (is_image ? 'image' : 'other'))
      %li
        = link_to('4', {:controller => 'data_objects', :action => 'rate', :id => data_object.id, :stars => 4}, :class => 'four-stars', 'data-data_object_id' => data_object.id, 'data-data_type' => (is_image ? 'image' : 'other'))
      %li
        = link_to('5', {:controller => 'data_objects', :action => 'rate', :id => data_object.id, :stars => 5}, :class => 'five-stars', 'data-data_object_id' => data_object.id, 'data-data_type' => (is_image ? 'image' : 'other'))
