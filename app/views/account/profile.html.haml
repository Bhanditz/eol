= javascript_include_tag 'users'
#page-separator-general
#page-title
  %h1= "Your Preferences"[]
  %hr
#page-content.clearfix
  #full-page-content
    = eol_lang_error_messages_for :user if request.post?
    - form_for :user, :html => {:class => "single_body_form warning-warn invalid-invalid styleLabelOnErr"} do |f|
      %table#user_profile
        %tr
          -# The style here is a one-shot, make the right-column-look-right fix (seemed silly to put in CSS):
          %td{ :valign => "top", :style => "padding-right:30px;width:350px;" }
            %h3= "Account Information"[]
            %label Username:  (4 - 32 characters)
            = f.text_field :username, {:maxlength => 32, :onblur => 'javascript:check_username();'}
            %span#username_warn.error
            -# do not show open ide users for now
            %p{ :style => "padding-bottom:8pt;" }
              %br
              = "Only enter new password if you wish to change."[:only_enter_new_password_if_needed]
            %label{ :for => "entered_password" }== #{"New Password"[]} (4 - 16 characters)
            = f.password_field :entered_password, { :maxlength => 16, :autocomplete => 'off' }
            %label{ :for => "password_confirmation" }= "Confirm New Password"[]
            = f.password_field :entered_password_confirmation, {:maxlength => 16, :onblur => 'javascript:check_passwords();', :autocomplete => 'off'}
            %span#password_warn.error
            %br
            %p
              %br
            %label{ :title => "Please enter your email address"[], :for => "user_email" }
              = "Email Address"[]
              %span{ :title => "required" }
                *
              %span.warn== (#{"Required"[]})
            = f.text_field :email, { :maxlength => 100, :size => 30, :onblur => 'javascript:check_email();'}
            %span#email_warn.error
            %p
              %br
            %label{ :title => "Please enter your given name"[], :for => "user_given_name" }
              = "Given name"[:given_name]
              %span{ :title => "required" }
                *
              %span.warn== (#{"Required"[]})
            = f.text_field :given_name, { :maxlength => 30 }
            %label{ :title => "Please enter your family name"[], :for => "user_family_name" }
              = "Family name"[:family_name]
            = f.text_field :family_name, { :maxlength => 30 }
            %p
              %br
            %label{ :title => "Do you want to receive EOL notifications?"[], :for => "user_mailing_list" }
              = "Do you want to receive EOL notifications?"[]
            = f.check_box :mailing_list
            = "Yes"[:yes_answer]
            %p
              %br
            %label{ :title => "If there are comments or curator actions on your contributions, how often would you like to receive email alerts?"[], :for => "user_email_reports_frequency_hours" }
              = "If there are comments or curator actions on your contributions, how often would you like to receive email alerts?"[]
            - select_options = [['Never', 0] , ['Daily', 1*24], ['Weekly', 7*24], ['Monthly', 30*24]]
            = f.select :email_reports_frequency_hours, select_options
            %br
            %br
          %td{ :valign => "top" }
            -#
              # All of this is disabled for now...
              %h3= "Personal Information"[]
              %p{:style => "margin-bottom:2em;"}
                = "Please help EOL understand the needs of its users.  Fill out this short form, describing"[]
                = link_to('your information'[], url_for(:controller => :account, :action => :info), {:title => 'Your Information'[], :class => 'return_to'})
                = "personal information; It takes less than one minute."[]
            = render(:partial => 'taxa/set_content_settings', :locals => { :f => f })
            = render(:partial => 'curator_profile_settings', :locals => { :f => f })
      .button
        = submit_tag 'Update Account'[]
    = render(:partial => 'set_api_settings')
