= javascript_include_merged 'collections'
- editable = collection.editable_by?(current_user)
.collection
  - if editable
    .actions
      = link_to I18n.t(:delete) , collection.community, :method => :delete, :confirm => I18n.t(:are_you_sure) 
      = link_to_function I18n.t(:change_name) , "EOL.show_collection_name_field()"
  .name
    %h3#current_name= h collection.name
    - if editable
      #collection_name_field
        - form_for(collection) do |form|
          = form.text_field :name
  %p.owner
    - if collection.community_id 
      = I18n.t(:for) 
      = link_to collection.community.name, collection.community
    - elsif collection.user_id
      = I18n.t(:by) 
      = link_to collection.user.username, user_path(:user_id => collection.user)
    - else
      = I18n.t(:this_collection_is_not_attached_to_either_a_user_or_a_community) 
    - if collection.published?
      = I18n.t(:this_collection_can_be_viewed_by_the_public) 
  .items
    - form_for(collection) do |form|
      - collection.collection_items.each do |item|
        = render :partial => 'collection_items/show', :locals => { :collection_item => item, :editable => editable }
