= javascript_include_tag 'text-content.js' # TODO - move this to a merged file (probably)
%a{ :name => "center_content" }
.cpc-header
  - unless @content.nil?
    - toc_item = TocItem.find(@category_id, :include => :info_items, :select => { :table_of_contents => '*', :info_items => :id } )
    - if toc_item.allow_user_text?
      .multi_new_text_error{ :style => "display:none;" }
        Only one text object can be edited at a time.
      .add_text_button
        = link_to("<span style='width:20px;height:20px;display:block;'></span>", {:controller => :data_objects, :action => :new, :type => :text, :taxon_concept_id => @taxon_concept.id, :toc_id => @new_text_tocitem_id}, :id => 'new_text_content_button', :title => "Add new content" )
  - unless @whats_this.nil?
    #whats_this
      = link_to "What's This?", @whats_this
  %h3= @content[:category_name] unless @content.nil?

.cpc-content= render(:partial => 'content_body')

- if @selected_text
  :javascript
    $(document).ready(function() {
      $(window).scrollTop($("#text_wrapper_#{@selected_text.id}").offset()['top'] - 40);
    });
