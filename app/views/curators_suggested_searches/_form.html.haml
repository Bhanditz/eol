#suggested_search
- helperstscope = [:helpers, :label, :data_search]


- taxon_concept_id = nil
- taxon_name = { value: nil }
 
= form_for @suggested_search ,method: 'get', class: 'suggested_search' do |f|
  .vital
    %fieldset
      %dl
        %dt
          = 'label'
        %dd
          = text_field :label
    %fieldset
      %dl
        %dt
          = label_tag :attribute, I18n.t(:attribute, scope: helperstscope)
        %dd
          = select_tag(:attribute, options_for_select(@attribute_options || [], @attribute || @attribute_default), {id: 'attributes_select'})
    %fieldset
      %dl
        %dt
          = label_tag :taxon_name, I18n.t(:taxon_name, scope: helperstscope)
        %dd
          = autocomplete_field :autocomplete, 'q', autocomplete_taxon_search_path,
            name: 'taxon_name', 'data-min-length' => 3, type: 'search',
            update_elements: { id: '#taxon_concept_id' },
            value: taxon_name[:value],
            placeholder: I18n.t('helpers.label.data_search.taxon_name_placeholder'),
            data: taxon_name[:data]
    %fieldset
      %h4= t('data_search.form.search_value_or_range_header')
      %dl
        %dt
          = label_tag :q, I18n.t(:q, scope: helperstscope)
        %dd
          = search_field_tag :q, @querystring,
            placeholder: I18n.t(:q_placeholder, scope: helperstscope),
            data: {disabled_placeholder: I18n.t(:q_placeholder_disabled,
            scope: helperstscope)}
      %h5= t('data_search.form.or_range_header').html_safe
      %dl.range
        %dt
          = label_tag :min, I18n.t(:min, scope: helperstscope)
        %dd
          = search_field_tag :min, @min_value,
            placeholder: I18n.t(:min_placeholder, scope: helperstscope),
            data: {disabled_placeholder: I18n.t(:min_placeholder_disabled,
            scope: helperstscope)}
      %dl.range
        %dt
          = label_tag :max, I18n.t(:max, scope: helperstscope)
        %dd
          = search_field_tag :max, @max_value,
            placeholder: I18n.t(:max_placeholder, scope: helperstscope),
            data: {disabled_placeholder: I18n.t(:max_placeholder_disabled,
            scope: helperstscope)}
      %dl.range
        %dt
          = label_tag :unit, I18n.t(:unit, scope: helperstscope)
        %dd
          - unit_options = nil#{ I18n.t(:not_specified) => nil }.merge(Hash[ @units_for_select.collect{ |u| [ u.label, u.uri ] } ])
          =  select_tag :unit #, options_for_select(unit_options, @unit)
    %fieldset.sort
      %dl
        %dt
          = label_tag :sort, I18n.t(:sort_by_label)
        %dd
          - sort_options = { I18n.t(:sort_by_value_ascending) => 'asc',
            I18n.t(:sort_by_value_descending) => 'desc' }
          = select_tag :sort, options_for_select(sort_options, @sort)
  %fieldset.actions
    = submit_tag I18n.t(:save)
  