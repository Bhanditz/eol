= javascript_include_tag 'tree'
= stylesheet_link_tag 'tree'
#content{ "ng-app" => "eol", "ng-controller" => "navigate", "ng-init" => "first ='huda' " }

  - tree = [{:id=>1, :scientific_name=>"Animalia", :image_key=>201311212274026, :common_names=>{"fr"=>"Goodeinae", "en"=>"animals", "ar"=>"حيوان", "es"=>"Animales", "nl"=>"Dieren", "ru"=>"Животные", "uk"=>"Тварини", "de"=>"Tier", "pt-BR"=>"Reino Animal"}, :thumbnail=>"http://media.eol.org/content/2013/11/21/22/74026_130_130.jpg", "children"=>[{:id=>1325, :scientific_name=>"Crangonyctidae", :image_key=>201212051474727, :common_names=>{}, :thumbnail=>"http://media.eol.org/content/2012/12/05/14/74727_130_130.jpg", "children"=>[{:id=>40811, :scientific_name=>"Stygobromus", :image_key=>201005151114434, :common_names=>{}, :thumbnail=>"http://media.eol.org/content/2010/05/15/11/14434_130_130.jpg", "children"=>[{:id=>1024504, :scientific_name=>"Stygobromus emarginatus", :image_key=>nil, :common_names=>{"en"=>"Greenbrier cave amphipod"}, :thumbnail=>nil}, {:id=>1037735, :scientific_name=>"Stygobromus reddelli", :image_key=>nil, :common_names=>{"en"=>"Reddell's cave amphipod"}, :thumbnail=>nil}, {:id=>1037099, :scientific_name=>"Stygobromus mundus", :image_key=>nil, :common_names=>{"en"=>"Bath County cave amphipod"}, :thumbnail=>nil}, {:id=>1037733, :scientific_name=>"Stygobromus dejectus", :image_key=>nil, :common_names=>{"en"=>"Cascade cave amphipod"}, :thumbnail=>nil}]}]}]},
   {:id=>281, :scientific_name=>"Plantae", :image_key=>201202030353279, :common_names=>{"en"=>"plants", "fr"=>"plantes", "ar"=>"نبات", "es"=>"Plantas", "uk"=>"Рослини", "de"=>"Gefäßpflanzen", "nl"=>"Vaatplanten", "ru"=>"Голосеменные"}, :thumbnail=>"http://media.eol.org/content/2012/02/03/03/53279_130_130.jpg", "children"=>[{:id=>3893, :scientific_name=>"Chlorophyta", :image_key=>201310060949896, :common_names=>{"fr"=>"Chlorophyta", "en"=>"green algae", "uk"=>"Зелені водорості", "nl"=>"groenwieren"}, :thumbnail=>"http://media.eol.org/content/2013/10/06/09/49896_130_130.jpg", "children"=>[{:id=>2968283, :scientific_name=>"Nephroselmidophyceae", :image_key=>201401211510303, :common_names=>{}, :thumbnail=>"http://media.eol.org/content/2014/01/21/15/10303_130_130.jpg", "children"=>[{:id=>2968284, :scientific_name=>"Nephroselmidales", :image_key=>201401211510303, :common_names=>{}, :thumbnail=>"http://media.eol.org/content/2014/01/21/15/10303_130_130.jpg", "children"=>[{:id=>4477, :scientific_name=>"Nephroselmidaceae Skuja, 1948 ex P.C. Silva, 1980", :image_key=>201401211510303, :common_names=>{}, :thumbnail=>"http://media.eol.org/content/2014/01/21/15/10303_130_130.jpg"}]}]}]}, {:id=>33000726, :scientific_name=>"Gymnospermae", :image_key=>201206130774687, :common_names=>{}, :thumbnail=>"http://media.eol.org/content/2012/06/13/07/74687_130_130.jpg", "children"=>[{:id=>33001032, :scientific_name=>"Ginkgopsida", :image_key=>201411020471920, :common_names=>{}, :thumbnail=>"http://media.eol.org/content/2014/11/02/04/71920_130_130.jpg", "children"=>[{:id=>4088, :scientific_name=>"Ginkgoales", :image_key=>201411020471920, :common_names=>{}, :thumbnail=>"http://media.eol.org/content/2014/11/02/04/71920_130_130.jpg", "children"=>[{:id=>4089, :scientific_name=>"Ginkgoaceae", :image_key=>201306240332261, :common_names=>{"nl"=>"Ginkgofamilie"}, :thumbnail=>"http://media.eol.org/content/2013/06/24/03/32261_130_130.jpg", "children"=>[{:id=>108391, :scientific_name=>"Ginkgo", :image_key=>201411020471920, :common_names=>{"en"=>"ginkgo"}, :thumbnail=>"http://media.eol.org/content/2014/11/02/04/71920_130_130.jpg", "children"=>[{:id=>1156278, :scientific_name=>"Ginkgo biloba Linnaeus", :image_key=>201206121152498, :common_names=>{"en"=>"ginkgo", "de"=>"ginkgo", "fr"=>"ginkgo", "nl"=>"ginkgo", "ar"=>"mabad ag", "es"=>"árbole de los cuarrentos escudos"}, :thumbnail=>"http://media.eol.org/content/2012/06/12/11/52498_130_130.jpg"}]}]}]}]}, {:id=>4091, :scientific_name=>"Gnetopsida", :image_key=>201204020028668, :common_names=>{}, :thumbnail=>"http://media.eol.org/content/2012/04/02/00/28668_130_130.jpg", "children"=>[{:id=>8152, :scientific_name=>"Gnetales", :image_key=>201204020028668, :common_names=>{}, :thumbnail=>"http://media.eol.org/content/2012/04/02/00/28668_130_130.jpg", "children"=>[{:id=>8153, :scientific_name=>"Gnetaceae", :image_key=>201204020028668, :common_names=>{}, :thumbnail=>"http://media.eol.org/content/2012/04/02/00/28668_130_130.jpg", "children"=>[{:id=>107463, :scientific_name=>"Gnetum", :image_key=>201208240905536, :common_names=>{"en"=>"Gnetum"}, :thumbnail=>"http://media.eol.org/content/2012/08/24/09/05536_130_130.jpg", "children"=>[{:id=>1156260, :scientific_name=>"Gnetum gnemon Linnaeus", :image_key=>201207071624442, :common_names=>{"en"=>"buko"}, :thumbnail=>"http://media.eol.org/content/2012/07/07/16/24442_130_130.jpg"}, {:id=>1156257, :scientific_name=>"Gnetum parvifolium (Warburg) W. C. Cheng", :image_key=>nil, :common_names=>{}, :thumbnail=>nil}, {:id=>1156256, :scientific_name=>"Gnetum luofuense C.Y. Cheng", :image_key=>201410051775209, :common_names=>{}, :thumbnail=>"http://media.eol.org/content/2014/10/05/17/75209_130_130.jpg"}, {:id=>1113977, :scientific_name=>"Gnetum montanum Markgraf", :image_key=>nil, :common_names=>{}, :thumbnail=>nil}]}]}]}]}, {:id=>4236, :scientific_name=>"Cycadopsida", :image_key=>201111021476812, :common_names=>{"en"=>"cycads"}, :thumbnail=>"http://media.eol.org/content/2011/11/02/14/76812_130_130.jpg"}]}, {:id=>3768, :scientific_name=>"Bryophyta", :image_key=>201209030385301, :common_names=>{"fr"=>"Bryophyta", "en"=>"mosses", "de"=>"Laubmoose", "nl"=>"Mossen", "es"=>"Bryophyta sensu stricto"}, :thumbnail=>"http://media.eol.org/content/2012/09/03/03/85301_130_130.jpg", "children"=>[{:id=>3890, :scientific_name=>"Sphagnopsida", :image_key=>201205240223332, :common_names=>{}, :thumbnail=>"http://media.eol.org/content/2012/05/24/02/23332_130_130.jpg", "children"=>[{:id=>3891, :scientific_name=>"Sphagnales", :image_key=>201205240223332, :common_names=>{}, :thumbnail=>"http://media.eol.org/content/2012/05/24/02/23332_130_130.jpg", "children"=>[{:id=>3892, :scientific_name=>"Sphagnaceae", :image_key=>201212041853231, :common_names=>{}, :thumbnail=>"http://media.eol.org/content/2012/12/04/18/53231_130_130.jpg", "children"=>[{:id=>47595, :scientific_name=>"Sphagnum", :image_key=>201205240214320, :common_names=>{"en"=>"Peat moss"}, :thumbnail=>"http://media.eol.org/content/2012/05/24/02/14320_130_130.jpg", "children"=>[{:id=>926587, :scientific_name=>"Sphagnum angermanicum Melin", :image_key=>nil, :common_names=>{"en"=>"Angerman's sphagnum"}, :thumbnail=>nil}, {:id=>928390, :scientific_name=>"Sphagnum recurvum P. Beauvois", :image_key=>201205240201062, :common_names=>{"en"=>"recurved sphagnum", "de"=>"Gekrümmtastiges Torfmoos"}, :thumbnail=>"http://media.eol.org/content/2012/05/24/02/01062_130_130.jpg"}, {:id=>853345, :scientific_name=>"Sphagnum capillifolium (Ehrhart) Hedwig", :image_key=>201205240298719, :common_names=>{"en"=>"Northern Peatmoss"}, :thumbnail=>"http://media.eol.org/content/2012/05/24/02/98719_130_130.jpg"}, {:id=>2885505, :scientific_name=>"Sphagnum bergianum R. E. Andrus", :image_key=>nil, :common_names=>{}, :thumbnail=>nil}]}]}]}]}, {:id=>3774, :scientific_name=>"Bryopsida", :image_key=>201205240223332, :common_names=>{}, :thumbnail=>"http://media.eol.org/content/2012/05/24/02/23332_130_130.jpg"}]}]},
   {:id=>5559, :scientific_name=>"Fungi", :image_key=>201212110804669, :common_names=>{"en"=>"Fungi", "fr"=>"Deuteromycota", "ar"=>"فطر", "nl"=>"Schimmels", "de"=>"Hefen", "es"=>"Levadura", "ru"=>"Дрожжи"}, :thumbnail=>"http://media.eol.org/content/2012/12/11/08/04669_130_130.jpg", "children"=>[{:id=>5664, :scientific_name=>"Basidiomycota", :image_key=>201206120572724, :common_names=>{"en"=>"Basidiomycetes", "nl"=>"steeltjeszwammen", "uk"=>"Базидієві гриби"}, :thumbnail=>"http://media.eol.org/content/2012/06/12/05/72724_130_130.jpg", "children"=>[{:id=>5793, :scientific_name=>"Ustilaginomycetes", :image_key=>201111011999924, :common_names=>{}, :thumbnail=>"http://media.eol.org/content/2011/11/01/19/99924_130_130.jpg", "children"=>[{:id=>8556431, :scientific_name=>"Malasseziales", :image_key=>200911250341452, :common_names=>{}, :thumbnail=>"http://media.eol.org/content/2009/11/25/03/41452_130_130.jpg", "children"=>[{:id=>10209634, :scientific_name=>"Malazsseziaceae", :image_key=>201311141916760, :common_names=>{}, :thumbnail=>"http://media.eol.org/content/2013/11/14/19/16760_130_130.jpg", "children"=>[{:id=>32138, :scientific_name=>"Malassezia", :image_key=>200911250341452, :common_names=>{}, :thumbnail=>"http://media.eol.org/content/2009/11/25/03/41452_130_130.jpg", "children"=>[{:id=>248533, :scientific_name=>"Malassezia furfur (C.P. Robin) Baill.", :image_key=>200911250341452, :common_names=>{"en"=>"Pityriasis (Tinea) versicolor infection agent"}, :thumbnail=>"http://media.eol.org/content/2009/11/25/03/41452_130_130.jpg"}]}]}]}]}, {:id=>2865511, :scientific_name=>"Agaricomycetes", :image_key=>201206120572724, :common_names=>{"en"=>"Mushroom-Forming Fungi"}, :thumbnail=>"http://media.eol.org/content/2012/06/12/05/72724_130_130.jpg", "children"=>[{:id=>5676, :scientific_name=>"Agaricales", :image_key=>201411220337352, :common_names=>{"en"=>"Gilled Fungi"}, :thumbnail=>"http://media.eol.org/content/2014/11/22/03/37352_130_130.jpg", "children"=>[{:id=>5979, :scientific_name=>"Marasmiaceae", :image_key=>201108180733951, :common_names=>{}, :thumbnail=>"http://media.eol.org/content/2011/08/18/07/33951_130_130.jpg", "children"=>[{:id=>16326, :scientific_name=>"Tetrapyrgos", :image_key=>201108180733951, :common_names=>{}, :thumbnail=>"http://media.eol.org/content/2011/08/18/07/33951_130_130.jpg", "children"=>[{:id=>133428, :scientific_name=>"Tetrapyrgos olivaceonigra (E. Horak) E. Horak 1987", :image_key=>nil, :common_names=>{}, :thumbnail=>nil}, {:id=>1031935, :scientific_name=>"Tetrapyrgos alba (Berk. & M. A. Curtis) E. Horak 1987", :image_key=>nil, :common_names=>{}, :thumbnail=>nil}, {:id=>133431, :scientific_name=>"Tetrapyrgos reducta (Singer) E. Horak 1987", :image_key=>nil, :common_names=>{}, :thumbnail=>nil}, {:id=>16326, :scientific_name=>"Tetrapyrgos", :image_key=>201108180733951, :common_names=>{}, :thumbnail=>"http://media.eol.org/content/2011/08/18/07/33951_130_130.jpg", "children"=>[{:id=>133429, :scientific_name=>"Tetrapyrgos peullensis (Singer) E. Horak 1987", :image_key=>nil, :common_names=>{}, :thumbnail=>nil}]}]}, {:id=>18802, :scientific_name=>"Xerula", :image_key=>201410020480003, :common_names=>{}, :thumbnail=>"http://media.eol.org/content/2014/10/02/04/80003_130_130.jpg"}]}]}]}]}]}]
  
  %ul.branch
    - for branch in tree
      %li
        - tc  = TaxonConcept.find branch[:id]
        = link_to  branch[:scientific_name], taxon_overview_path(branch[:id])
        - open_tree_path = taxon_entry_tree_path(tc.id, tc.entry)
        - unless branch['children'].blank?
          = link_to( "+" , "",
           data_url: open_tree_path,
          "ng-click" => "expand($event)")
          {{ children }}
          -# = render 'children' , children: branch["children"]
          
