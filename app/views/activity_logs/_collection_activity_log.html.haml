- if item.user
  = link_to image_tag(item.user.logo_url(:small), :alt => I18n.t(:comment_show_posters_image_alt,
    :posters_name => h(item.user.full_name))), user_path(item.user), :class => 'avatar'
.details
  - translation_vars = {:scope => [:activity_logs, :collection_activity_log]}
  - user_type = 'user'
  - if item.user.nil?
    - user_type = 'an_unknown_user'
  - else
    - translation_vars[:user] = link_to(h(item.user.full_name), user_path(item.user))
  - collection_type = 'collection'
  - if item.collection.nil?
    - collection_type = 'an_unknown_collection'
  - else
    - translation_vars[:collection] = link_to(item.collection.summary_name, collection_path(item.collection))
  - item_type = 'item'
  - if item.collection_item.nil? || item.collection_item.object.nil?
    - item_type = 'an_unknown_item'
  - else
    - translation_vars[:item] = link_to(item.collection_item.object.summary_name, link_to_item(item.collection_item.object))
  %p
    - case item.activity_id
    - when Activity.add_editor.id
      = I18n.t("add_editor.#{user_type}_of_#{collection_type}", translation_vars)
    - when Activity.create.id
      = I18n.t("create.#{user_type}_created_#{collection_type}", translation_vars)
    - when Activity.remove_all.id
      = I18n.t("remove_all.#{user_type}_cleared_#{collection_type}", translation_vars)
    - when Activity.remove.id
      = I18n.t("remove.#{user_type}_removed_#{item_type}_from_#{collection_type}", translation_vars)
    - when Activity.collect.id
      = I18n.t("collect.#{user_type}_added_#{item_type}_to_#{collection_type}", translation_vars)
    - else
      = I18n.t("other.#{user_type}_modified_#{collection_type}", translation_vars)
  %p.meta
    = I18n.t(:time_ago, :time_passed => time_ago_in_words(item.created_at))
  - if item.user && item.collection
    %ul.actions
      %li.reply= link_to(I18n.t(:reply), collection_path(item.collection) + "#reply-to-CollectionActivityLog-#{item.id}", :'data-reply-to' => item.user.full_name, :'data-reply-to-type' => item.class.name, :'data-reply-to-id' => item.id)
