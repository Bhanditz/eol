EOL||(EOL={}),EOL.Curation||(EOL.Curation={}),EOL.Curation.form_is_valid=function(e){var t=$("#"+e.attr("data-data_object_id")+"_vetted_id_"+EOL.Curation.UNTRUSTED_ID).is(":checked"),n=e.find(".curation-comment-box").val()=="",r=e.find(".untrust_reason:checked").siblings().map(function(){return this.innerHTML}).get()=="";return t?!n||!r:!0},EOL.Curation.update_icons=function(e,t){$("ul[data-data_object_id="+e+"] li.invisible_icon").hide(),$("ul[data-data_object_id="+e+"] li.inappropriate_icon").hide(),t==EOL.Curation.INVISIBLE_ID?$("ul[data-data_object_id="+e+"] li.invisible_icon").css({display:"inline-block"}):t==EOL.Curation.INAPPROPRIATE_ID&&$("ul[data-data_object_id="+e+"] li.inappropriate_icon").css({display:"inline-block"})},EOL.Curation.post_curate_image=function(e,t){var n=e[0],r=e[1],i=e[2],s=EOL.Curation.vetted_type[i];if(t=="species_page")EOL.Curation.update_icons(n,r),EOL.toggle_main_img_icons(n),thumbnail=$("#thumbnails a#thumb-"+n),image_wrap=$("#image-"+n),notes=$("#mc-notes-"+n),classes="trusted unknown untrusted unknown-text untrusted-text trusted-text",thumbnail.removeClass(classes).addClass(s),image_wrap.removeClass(classes).addClass(s),notes.removeClass(classes).addClass(s+"-text");else{var o=$("#"+n+"_vetted_id_"+i),u=$("#undo-move-"+n);o.parents("td").removeClass("unknown untrusted trusted").addClass(s),o.parents("td").siblings("td").removeClass("unknown untrusted trusted").addClass(s),u.removeClass("unknown untrusted trusted").addClass(s)}},EOL.Curation.post_curate_text=function(e,t){var n=e[0],r=e[1],i=e[2];t=="species_page"&&($("div#text_buttons_"+n+" div.trust_button").remove(),$("div#text_buttons_"+n+" div.untrust_button").remove(),$("#text_"+n).removeClass("untrusted unknown trusted"),i==EOL.Curation.UNTRUSTED_ID?$("#text_"+n).addClass("untrusted"):i==EOL.Curation.UNKNOWN_ID&&$("#text_"+n).addClass("unknown"),EOL.Curation.update_icons(n,r))},$(document).ready(function(){$('form.curation_form input[type="submit"]').click(function(){var e=$(this).closest("form"),t=e.attr("data-page_type");return e.find("div.processing").show(),submit=e.find(":submit"),the_comment=e.find("textarea"),$.ajax({url:e.attr("action"),type:"PUT",dataType:"json",beforeSend:function(t){if(!EOL.Curation.form_is_valid(e))return e.find(".untrust_reason").parent().parent().find("b").show().css("color","red"),e.find("div.processing").fadeOut(),!1;t.setRequestHeader("Accept","text/javascript"),submit.attr("disabled","disabled"),the_comment.attr("disabled","disabled")},complete:function(){submit.attr("disabled",""),the_comment.attr("disabled",""),e.find("div.processing").fadeOut(),e.find(".untrust_reason").parent().parent().find("b").show().css("color","black")},success:function(n){$("#comment_button_link_"+n.args[0]+" .span_block").html(n.args[4]),(e.find(".reason").siblings("input").attr("checked")||the_comment.val())&&$("#comment_button_link_"+n.args[0]).click(),the_comment.val(""),n.type=="text"?EOL.Curation.post_curate_text(n.args,t):EOL.Curation.post_curate_image(n.args,t)},data:$(e).serialize()}),!1}),$('div.vetted .untrust input[type="radio"]').click(function(){$(this).parent().find(".untrust_reason").parent().parent().find("b").show().css("color","black"),$(this).parent().find("div.reason").slideDown()}),$('div.vetted .trust input[type="radio"]').click(function(){$(this).parent().parent().find("div.reason").slideUp()}),$('div.vetted .unreviewed input[type="radio"]').click(function(){$(this).parent().parent().find("div.reason").slideUp()}),$("form.curation .cancel-button").click(function(){$(this).closest("div.overlay, div.text-slidebox-container").find("a.close, a.close-button").click()}),$("div.text_curation_close a.close-button").click(function(){$(this).parent().parent().parent().slideUp()}),$("td.show_all input").click(function(e){var t=$("#show_other_classifications");window.location=t.attr("href")+"&split_hierarchy_entry_id[]="+$(e.target).val(),$("div.main_container").children().fadeOut(function(){$("#please_wait").fadeIn()})}),$("th.check_all").append('<input class="chek_all_from_header" type="checkbox"/>'),$("input.chek_all_from_header").click(function(e){$(e.target).closest("table").find("td input[type=checkbox]").attr("checked",$(e.target).is(":checked"))})});