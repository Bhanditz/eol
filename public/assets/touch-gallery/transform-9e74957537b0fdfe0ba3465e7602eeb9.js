/*!
 * NETEYE Transform & Transition Plugin
 *
 * Copyright (c) 2010 NETEYE GmbH
 * Licensed under the MIT license
 *
 * Author: Felix Gnass [fgnass at neteye dot de]
 * Version: @{VERSION}
 */
(function(e){function r(e,t){var n=e.data("transform");return n||(n=new s,e.data("transform",n)),t!==undefined&&(t===!1||t.reset?n.reset():n.exec(t)),n}function i(t,n){function r(e,t){return e.replace(/\{(\w+)\}/g,function(e,n){return t[n]})}this.reset=function(){e.extend(this,n)},this.format=function(){return r(t,this)},this.reset()}function s(){var t={translate:new i("translate({x}px,{y}px)",{x:0,y:0}),scale:new i("scale({x},{y})",{x:1,y:1}),rotate:new i("rotate({deg}deg)",{deg:0})};n&&(t.translate=new i("translate3d({x}px,{y}px,0px)",{x:0,y:0}),t.scale=new i("scale3d({x},{y},1)",{x:1,y:1}));var r={rotate:function(e){t.rotate.deg=e},rotateBy:function(e){t.rotate.deg+=e},scale:function(e){typeof e=="number"&&(e={x:e,y:e}),t.scale.x=e.x,t.scale.y=e.y},scaleBy:function(e){typeof e=="number"&&(e={x:e,y:e}),t.scale.x*=e.x,t.scale.y*=e.y},translate:function(e){var n=t.translate;e||(e={x:0,y:0}),n.x=e.x!==undefined?parseInt(e.x,10):n.x,n.y=e.y!==undefined?parseInt(e.y,10):n.y},translateBy:function(e){var n=t.translate;n.x+=parseInt(e.x,10)||0,n.y+=parseInt(e.y,10)||0}};this.fn=t,this.exec=function(e){for(var t in e)r[t]&&r[t](e[t])},this.reset=function(){e.each(t,function(){this.reset()})},this.format=function(){var n="";return e.each(t,function(e,t){n+=t.format()+" "}),n}}var t=function(){function r(r){var i="";return n[r]!==undefined?r:(e.each(t,function(){var e=this+r.charAt(0).toUpperCase()+r.substring(1);if(n[e]!==undefined)return i=e,!1}),i)}var t=["Webkit","Moz","O"],n=document.createElement("div").style,i={};return e.each(["transitionDuration","transitionProperty","transform","transformOrigin"],function(){i[this]=r(this)}),i}(),n=function(){var e=document.createElement("div").style;try{return e[t.transform]="translate3d(0,0,0)",e[t.transform].length>0}catch(n){return!1}}();e.fn.transform=function(n){var i=this;return e.fn.transform.supported&&this.each(function(){var s=e(this),o=r(s,n);if(n===undefined)return i=o.fn,!1;var u=n&&n.origin?n.origin:"0 0";s.css(t.transitionDuration,"0s").css(t.transformOrigin,u).css(t.transform,o.format())}),i},e.fn.transform.supported=!!t.transform,e.fn.transition=function(n,r){r=e.extend({delay:0,duration:.4},r);var i="";return e.each(n,function(e,t){i+=e+","}),this.each(function(){function u(){s.css(t.transitionProperty,i).css(t.transitionDuration,r.duration+"s"),s.css(n),r.duration>0?s.one("webkitTransitionEnd oTransitionEnd transitionend",a):setTimeout(a,1)}function a(){s.css(t.transitionDuration,o),r.onFinish&&e.proxy(r.onFinish,s)()}var s=e(this);if(!e.fn.transition.supported){s.css(n),r.onFinish&&e.proxy(r.onFinish,s)();return}var o=s.css(t.transitionDuration);r.delay>0?setTimeout(u,r.delay):u()}),this},e.fn.transition.supported=!!t.transitionProperty,e.fn.transformTransition=function(n){n=e.extend({origin:"0 0",css:{}},n);var i=n.css;return e.fn.transform.supported&&(i[t.transform]=r(this,n).format(),this.css(t.transformOrigin,n.origin)),this.transition(i,n)}})(jQuery);