var wgOggPlayer={detectionDone:!1,msie:!1,safari:!1,opera:!1,mozilla:!1,players:["videoElement","cortado","quicktime-mozilla","quicktime-activex","vlc-mozilla","vlc-activex","totem","kmplayer","kaffeine","mplayerplug-in","oggPlugin"],clientSupports:{thumbnail:!0},mimeTypes:{"quicktime-mozilla":"video/quicktime","quicktime-activex":"video/quicktime","vlc-mozilla":"application/x-vlc-plugin",oggPlugin:"application/ogg",totem:"application/ogg",kmplayer:"application/ogg",kaffeine:"application/ogg","mplayerplug-in":"application/ogg"},savedThumbs:{},qtTimers:{},defaultMsg:{"ogg-player-totem":"Totem","ogg-player-kmplayer":"KMPlayer","ogg-player-kaffeine":"Kaffeine","ogg-player-mplayerplug-in":"mplayerplug-in"},msg:{},cortadoUrl:"",extPathUrl:"",showPlayerSelect:!0,controlsHeightGuess:20,init:function(e,t){elt=document.getElementById(t.id);if(!(t.id in this.savedThumbs)){var n=document.createDocumentFragment();for(i=0;i<elt.childNodes.length;i++)n.appendChild(elt.childNodes.item(i).cloneNode(!0));this.savedThumbs[t.id]=n}this.detect();if(!e){var r=this.getCookie("ogg_player");r&&r!="thumbnail"&&(e=r)}this.clientSupports[e]||(e=!1);if(!e)for(var i=0;i<this.players.length;i++)if(this.clientSupports[this.players[i]]){e=this.players[i];break}elt.innerHTML="";switch(e){case"videoElement":this.embedVideoElement(elt,t);break;case"oggPlugin":case"kaffeine":case"totem":case"kmplayer":case"mplayerplug-in":this.embedOggPlugin(elt,t,e);break;case"vlc-mozilla":this.embedVlcPlugin(elt,t);break;case"vlc-activex":this.embedVlcActiveX(elt,t);break;case"cortado":this.embedCortado(elt,t);break;case"quicktime-mozilla":case"quicktime-activex":this.embedQuicktimePlugin(elt,t,e);break;case"thumbnail":default:t.id in this.savedThumbs?elt.appendChild(this.savedThumbs[t.id].cloneNode(!0)):elt.appendChild(document.createTextNode("Missing saved thumbnail for "+t.id));if(e!="thumbnail"){var s=document.createElement("div");s.className="ogg-player-options",s.style.cssText="width: "+(t.width-10)+"px;",s.innerHTML=this.msg["ogg-no-player"],elt.appendChild(s),e="none"}}if(e!="thumbnail"){var o=this.makeOptionsBox(e,t),u=this.makeOptionsLink(t.id),s=document.createElement("div");s.appendChild(o),s.appendChild(u),elt.appendChild(s)}},debug:function(e){},supportedMimeType:function(e){for(var t=navigator.plugins.length;t-->0;){var n=navigator.plugins[t];if(typeof n[e]!="undefined")return!0}return!1},detect:function(){if(this.detectionDone)return;this.detectionDone=!0,this.msie=navigator.appName=="Microsoft Internet Explorer",this.mozilla=navigator.appName=="Netscape",this.opera=navigator.appName=="Opera",this.safari=navigator.vendor&&navigator.vendor.substr(0,5)=="Apple",this.konqueror=navigator.appName=="Konqueror";var e=navigator.javaEnabled(),t=this.opera;t&&e&&(this.clientSupports.cortado=!0),this.konqueror&&(e=!1),this.testActiveX("VideoLAN.VLCPlugin.2")&&(this.clientSupports["vlc-activex"]=!0),e&&this.testActiveX("JavaWebStart.isInstalled")&&(this.clientSupports.cortado=!0),this.testActiveX("QuickTimeCheckObject.QuickTimeCheck.1")&&(this.clientSupports["quicktime-activex"]=!0);if(typeof HTMLVideoElement=="object"||typeof HTMLVideoElement=="function")if(wgOggPlayer.safari)try{var n=document.createElement("video");n.canPlayType&&n.canPlayType('video/ogg;codecs="theora,vorbis"')=="probably"?this.clientSupports.videoElement=!0:this.supportedMimeType("video/ogg")&&(this.clientSupports.videoElement=!0)}catch(r){}else this.clientSupports.videoElement=!0;if(!navigator.mimeTypes||navigator.mimeTypes.length==0)return;var i={},s={},o={},u,a;for(a=0;a<navigator.mimeTypes.length;a++){var f=navigator.mimeTypes[a],l=f.type,c=l.indexOf(";");c>-1&&(l=l.substr(0,c));var h=f.enabledPlugin,p=h&&h.name?h.name:"",d=h&&h.filename?h.filename:"";u="";if(e&&l=="application/x-java-applet")this.clientSupports.cortado=!0,u="";else if(d.indexOf("libtotem")>-1)u="totem";else if(d.indexOf("libkmplayerpart")>-1){if(p=="Windows Media Player Plugin"||p=="QuickTime Plug-in")u="kmplayer"}else d.indexOf("kaffeineplugin")>-1?u="kaffeine":p.indexOf("mplayerplug-in")>-1?u="mplayerplug-in":d.indexOf("mplayerplug-in-qt")>-1?u="":p.indexOf("QuickTime Plug-in")>-1?u="quicktime-mozilla":p.toLowerCase()=="vlc multimedia plugin"?u="vlc-mozilla":l=="application/ogg"&&(u="oggPlugin");this.konqueror&&u=="vlc-mozilla"&&(u=""),u in i||(i[u]={}),i[u][l]=!0,l in s||(s[l]={},o[l]=0),u in s[l]||(s[l][u]=!0,o[l]++)}for(a=0;a<this.players.length;a++){u=this.players[a];if(!(u in i))continue;var v=this.mimeTypes[u];if(v in o&&o[v]==1&&v in i[u]){this.debug(u+" -> "+v),this.clientSupports[u]=!0;continue}for(var l in i[u])if(o[l]==1){this.mimeTypes[u]=l,this.clientSupports[u]=!0,this.debug(u+" => "+l);break}u in this.clientSupports||(i[u].length>0?this.debug("No unique MIME type for "+u):this.debug("No types for player "+u))}},testActiveX:function(e){if(this.mozilla)return!1;var t=!0;try{var n=new ActiveXObject(""+e)}catch(r){t=!1}return t},addOption:function(e,t,n,r){var i=document.createElement("option");i.value=t,i.appendChild(document.createTextNode(n)),r&&(i.selected=!0),e.appendChild(i)},hx:function(e){return typeof e!="String"&&(e=e.toString()),e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},hq:function(e){return'"'+this.hx(e)+'"'},getMsg:function(e){return e in this.msg?this.msg[e]:e in this.defaultMsg?this.defaultMsg[e]:"["+e+"]"},makeOptionsBox:function(e,t){var n,r,i,s,o,u;n=document.createElement("div"),n.style.cssText="width: "+(t.width-10)+"px; display: none;",n.className="ogg-player-options",n.id=t.id+"_options_box",n.align="center",s=document.createElement("ul"),t.linkUrl&&(o=document.createElement("li"),i=document.createElement("a"),i.href=t.linkUrl,i.appendChild(document.createTextNode(this.msg["ogg-desc-link"])),o.appendChild(i),s.appendChild(o)),o=document.createElement("li"),i=document.createElement("a"),i.href=t.videoUrl,i.appendChild(document.createTextNode(this.msg["ogg-download"])),o.appendChild(i),s.appendChild(o),n.appendChild(s),r=document.createElement("p"),r.appendChild(document.createTextNode(this.msg["ogg-use-player"])),n.appendChild(r),s=document.createElement("ul");for(var a=0;a<this.players.length+1;a++){var f,l;if(a==this.players.length)f="thumbnail",t.isVideo?l="ogg-player-thumbnail":l="ogg-player-soundthumb";else{f=this.players[a];if(!this.clientSupports[f])continue;l="ogg-player-"+f}o=document.createElement("li");if(f==e){var c=document.createElement("strong");c.appendChild(document.createTextNode(this.getMsg(l)+" "+this.msg["ogg-player-selected"])),o.appendChild(c)}else i=document.createElement("a"),i.href='javascript:void("'+f+'")',i.onclick=this.makePlayerFunction(f,t),i.appendChild(document.createTextNode(this.getMsg(l))),o.appendChild(i);s.appendChild(o)}return n.appendChild(s),div2=document.createElement("div"),div2.style.cssText="text-align: center;",u=document.createElement("button"),u.appendChild(document.createTextNode(this.msg["ogg-dismiss"])),u.onclick=this.makeDismissFunction(t.id),div2.appendChild(u),n.appendChild(div2),n},makeOptionsLink:function(e){var t=document.createElement("a");return t.href='javascript:void("options")',t.id=e+"_options_link",t.onclick=this.makeDisplayOptionsFunction(e),t.appendChild(document.createTextNode(this.msg["ogg-more"])),t},setCssProperty:function(e,t,n){var r=new RegExp(t+":[^;](;|$)");e.style.cssText.search(r)>-1?e.style.cssText=e.style.cssText.replace(r,t+":"+n+"$1"):e.style.cssText==""?e.style.cssText=t+":"+n+";":e.style.cssText[e.style.cssText.length-1]==";"?e.style.cssText+=t+":"+n+";":e.style.cssText+=";"+t+":"+n+";"},makeDismissFunction:function(e){var t=this;return function(){var n=document.getElementById(e+"_options_link"),r=document.getElementById(e+"_options_box");t.setCssProperty(n,"display","inline"),t.setCssProperty(r,"display","none")}},makeDisplayOptionsFunction:function(e){var t=this;return function(){var n=document.getElementById(e+"_options_link"),r=document.getElementById(e+"_options_box");t.setCssProperty(n,"display","none"),t.setCssProperty(r,"display","block")}},makePlayerFunction:function(e,t){var n=this;return function(){if(e!="thumbnail"){var r=6048e5;n.setCookie("ogg_player",e,r,!1,!1,!1,!1)}n.init(e,t)}},newButton:function(e,t,n){var r=document.createElement("input");return r.type="image",r.src=this.extPathUrl+"/"+t,r.alt=r.value=r.title=this.msg[e],r.onclick=n,r},newPlayButton:function(e){return this.newButton("ogg-play","play.png",function(){e.play()})},newPauseButton:function(e){return this.newButton("ogg-pause","pause.png",function(){e.pause()})},newStopButton:function(e){return this.newButton("ogg-stop","stop.png",function(){e.stop()})},embedVideoElement:function(e,t){var n=e.id+"_obj",r=t.isVideo?"video":"audio",i="<div><"+r+" id="+this.hq(n)+" width="+this.hq(t.width)+" height="+this.hq(t.height>0?t.height:this.controlsHeightGuess)+" src="+this.hq(t.videoUrl)+" autoplay";this.safari||(i+=" controls"),i+=" ></"+r+"></div>",e.innerHTML=i},embedOggPlugin:function(e,t,n){var r=e.id+"_obj";e.innerHTML+="<div><object id="+this.hq(r)+" type='"+this.mimeTypes[n]+"'"+" width="+this.hq(t.width)+" height="+this.hq(t.height+this.controlsHeightGuess)+" data="+this.hq(t.videoUrl)+"></object></div>"},embedVlcPlugin:function(e,t){var n=e.id+"_obj";e.innerHTML+="<div><object id="+this.hq(n)+" type='"+this.mimeTypes["vlc-mozilla"]+"'"+" width="+this.hq(t.width)+" height="+this.hq(t.height)+" data="+this.hq(t.videoUrl)+"></object></div>";var r=document.getElementById(n),i=document.createElement("div");i.appendChild(this.newPlayButton(r)),i.appendChild(this.newPauseButton(r)),i.appendChild(this.newStopButton(r)),e.appendChild(i)},embedVlcActiveX:function(e,t){var n=e.id+"_obj",r="<div><object id="+this.hq(n)+' classid="clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921"'+' codebase="http://downloads.videolan.org/pub/videolan/vlc/latest/win32/axvlc.cab#Version=0,8,6,0"'+" width="+this.hq(t.width)+" height="+this.hq(t.height)+' style="width: '+this.hx(t.width)+"px; height: "+this.hx(t.height)+'px;"'+">"+'<param name="mrl" value='+this.hq(t.videoUrl)+"/>"+"</object></div>";e.innerHTML+=r;var i=document.getElementById(n);t.width&&t.height&&(i.width=t.width,i.height=t.height,i.style.width=t.width+"px",i.style.height=t.height+"px");var s=document.createElement("div");s.appendChild(this.newButton("ogg-play","play.png",function(){i.playlist.play()})),s.appendChild(this.newButton("ogg-stop","stop.png",function(){i.playlist.stop()})),e.appendChild(s)},embedCortado:function(e,t){var n=18,r=t.height+n,i='<applet code="com.fluendo.player.Cortado.class"       width='+this.hq(t.width)+"      height="+this.hq(r)+"      archive="+this.hq(this.cortadoUrl)+">"+'  <param name="url"  value='+this.hq(t.videoUrl)+"/>"+'  <param name="duration"  value='+this.hq(t.length)+"/>"+'  <param name="seekable"  value="true"/>'+'  <param name="autoPlay" value="true"/>'+'  <param name="showStatus"  value="show"/>'+'  <param name="showSpeaker" value="false"/>'+'  <param name="statusHeight"  value="'+n+'"/>'+"</applet>";if(this.mozilla){var s=document.createElement("iframe");s.setAttribute("width",t.width),s.setAttribute("height",r),s.setAttribute("scrolling","no"),s.setAttribute("frameborder",0),s.setAttribute("marginWidth",0),s.setAttribute("marginHeight",0),e.appendChild(s);var o=s.contentDocument;o.open(),o.write("<html><body>"+i+"</body></html>"),o.close()}else e.innerHTML="<div>"+i+"</div>"},embedQuicktimePlugin:function(e,t,n){var r=e.id+"_obj",i=16,s="";n=="quicktime-activex"&&(s='classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B"'),e.innerHTML+="<div><object id="+this.hq(r)+" type='"+this.mimeTypes[n]+"'"+" width="+this.hq(t.width)+" height="+this.hq(t.height+i)+" data="+this.hq(this.extPathUrl+"/null_file.mov")+" "+s+">"+"<param name='SCALE' value='Aspect'/>"+"<param name='AUTOPLAY' value='True'/>"+"<param name='src' value="+this.hq(this.extPathUrl+"/null_file.mov")+"/>"+"<param name='QTSRC' value="+this.hq(t.videoUrl)+"/>"+"</object></div>";var o=this;this.qtTimers[t.id]=window.setInterval(this.makeQuickTimePollFunction(t),500)},makeQuickTimePollFunction:function(e){var t=this;return function(){var n=document.getElementById(e.id),r=e.id+"_obj",i=document.getElementById(r);if(n&&i){var s=!1,o=!1;try{s=i.GetComponentVersion("imdc","XiTh","Xiph"),o=!0}catch(u){}if(o){window.clearInterval(t.qtTimers[e.id]);if(!s||s=="0.0"){var a=document.createElement("div");a.className="ogg-player-options",a.style.cssText="width:"+(e.width-10)+"px;",a.innerHTML=t.getMsg("ogg-no-xiphqt");var f=document.getElementById(e.id+"_options_box");f?n.insertBefore(a,f.parentNode):n.appendChild(a)}t.setParam(i,"AUTOPLAY","False")}}}},addParam:function(e,t,n){var r=document.createElement("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)},setParam:function(e,t,n){var r=e.getElementsByTagName("param");for(var i=0;i<r.length;i++)if(r[i].name.toLowerCase()==t.toLowerCase()){r[i].value=n;return}this.addParam(e,t,n)},setCookie:function(e,t,n,r,i,s){var o=!1;n&&(o=new Date,o.setTime(o.getTime()+n)),document.cookie=e+"="+escape(t)+(o?"; expires="+o.toGMTString():"")+(r?"; path="+r:"")+(i?"; domain="+i:"")+(s?"; secure":"")},getCookie:function(e){var t=document.cookie.match(e+"=(.*?)(;|$)");return t?unescape(t[1]):!1}};wgOggPlayer.msg={"ogg-play":"Play","ogg-pause":"Pause","ogg-stop":"Stop","ogg-no-player":'Sorry, your system does not appear to have any supported player software.\nPlease <a href="http://www.mediawiki.org/wiki/Extension:OggHandler/Client_download">download a player</a>.',"ogg-player-videoElement":"Native browser support","ogg-player-oggPlugin":"Browser plugin","ogg-player-cortado":"Cortado (Java)","ogg-player-vlc-mozilla":"VLC","ogg-player-vlc-activex":"VLC (ActiveX)","ogg-player-quicktime-mozilla":"QuickTime","ogg-player-quicktime-activex":"QuickTime (ActiveX)","ogg-player-totem":"Totem","ogg-player-kaffeine":"Kaffeine","ogg-player-kmplayer":"KMPlayer","ogg-player-mplayerplug-in":"mplayerplug-in","ogg-player-thumbnail":"Still image only","ogg-player-selected":"(selected)","ogg-use-player":"Use player:","ogg-more":"More...","ogg-download":"Download file","ogg-desc-link":"About this file","ogg-dismiss":"Close","ogg-player-soundthumb":"No player","ogg-no-xiphqt":'You do not appear to have the XiphQT component for QuickTime.\nQuickTime cannot play Ogg files without this component.\nPlease <a href="http://www.mediawiki.org/wiki/Extension:OggHandler/Client_download">download XiphQT</a> or choose another player.'},wgOggPlayer.cortadoUrl="http://upload.wikimedia.org/jars/cortado.jar",wgOggPlayer.extPathUrl="http://en.wikipedia.org/w/extensions/OggHandler";